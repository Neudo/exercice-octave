{% set isBlue = (cardColor == 'blue') %}
{% set containerBg = isBlue ? 'blue-card' : 'white-card' %}
{% set textMain = isBlue ? 'text-white' : 'text-black' %}
{% set catColor = isBlue ? 'text-[#04F06A]' : 'text-[#451DC7]' %}
{% set reverse = reverse|default(false) %}
{% set offset = offset|default(false) %}

<div class="relative max-w-[412px] md:max-w-full mx-auto w-full rounded-xl {{ offset ? 'md:translate-y-[-20px] reveal-y-with-offset' : 'reveal-y' }}  overflow-hidden hover:shadow-md transition {{ containerBg }}">
  <div class="grid grid-cols-1 md:grid-cols-2 {{ reverse ? 'md:order-2' : 'md:order-1' }}">    
    <div class="relative {{ reverse ? 'md:order-2' : 'md:order-1' }}">
      {% if image %}
        <img src="{{ image.src }}" alt="{{ image.alt|default('') }}" class="w-full h-[260px] md:h-full object-cover">
      {% endif %}
      {% if tag %}
        <span class="absolute top-4 left-4 uppercase py-[4px] px-[12px] rounded-full {{ isBlue ? 'bg-[#451DC7] text-white' : 'bg-white text-[#451DC7]' }}">{{ tag }}</span>
      {% endif %}
    </div>

    <div class="p-6 md:p-10 flex flex-col justify-center gap-3 {{ reverse ? 'md:order-1' : 'md:order-2' }}">
      {% if categories %}
        <p class="text-sm uppercase {{ catColor }}">{{ categories|join('  <span class="mx-1">Â·</span>  ')|raw }}</p>
      {% endif %}

      {% if title %}
        <h2 class=" reveal-y text-2xl md:text-3xl leading-snug {{ textMain }}">{{ title }}</h2>
      {% endif %}

      {% if url %}
        <a href="{{ url }}" class="mt-4 inline-flex flex-col w-fit before:content-[''] before:absolute before:inset-0 {{ textMain }}">
          <span class="relative block after:content-[''] after:bottom-0 after:left-0 after:absolute after:w-full after:h-[3px] after:bg-[#04F06A] after:rounded-[100px] after:translate-y-0.5">Read more</span>
        </a>
      {% endif %}
    </div>
  </div>
</div>
